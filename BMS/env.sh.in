#!/bin/sh

# This file is used to set up ones environment to use this JANA installation
# when running bash. It is generated automatically when JANA is
# configured and installed during the install phase. To use it, do this:
#
# . /path/to/JANA/setenv.sh
#
# This sets environment variables for some other packages for which
# support was compiled into this version of JANA. Usually, you will
# need to use the same versions of these packages, hence their inclusion
# here. If you do not want those variables to be set here, then you can
# disable it by setting the JANAONLY environment variable.

# (DY)LD_LIBRARY_PATH
# On BSD systems, DYLD_LIBRARY_PATH is used while on most others
# (including Linux) LD_LIBRARY_PATH is used. To accomodate both styles,
# we put everything in a local LIBRARY_PATH variable and then
# add that to the appropriate variable at the end of the script.
# We initialize the LIBRARY_PATH with the JANA lib directory


export BMS_OSNAME="@BMS_OSNAME@"
export JANA_INSTALL_DIR="@prefix@"
export JANA_HOME=$JANA_INSTALL_DIR
export PATH=${JANA_HOME}/bin:${PATH}
set LIBRARY_PATH="${JANA_HOME}/lib"

# Add to JANA_PLUGIN_PATH or set it if it doesn't exist
if [ -n "${JANA_PLUGIN_PATH+x}" ]; then
	export JANA_PLUGIN_PATH=$JANA_HOME/lib
else
	export JANA_PLUGIN_PATH=$JANA_HOME/lib:${JANA_PLUGIN_PATH}
fi

# Optionally set environment for support packages
if [ -n "${JANAONLY-x}" ]; then

	# Xerces
	set HAVE_XERCES="@HAVE_XERCES@"
	if [ "$HAVE_XERCES" = "1" ]; then
		export XERCESCROOT="@XERCESCROOT@"
		set LIBRARY_PATH="${XERCESCROOT}/lib:${LIBRARY_PATH}"
	fi

	# ROOT
	set HAVE_ROOT="@HAVE_ROOT@"
	if [ "$HAVE_ROOT" = "1" ]; then
		export ROOTSYS="@ROOTSYS@"
		export PATH=${ROOTSYS}/bin:${PATH}
		set LIBRARY_PATH="${ROOTSYS}/lib:${LIBRARY_PATH}"
	fi

	# cMsg
	set HAVE_CMSG="@HAVE_CMSG@"
	if [ "$HAVE_CMSG" = "1" ]; then
		export CMSGROOT="@CMSGROOT@"
		export PATH=${CMSGROOT}/bin:${PATH}
		set LIBRARY_PATH="${CMSGROOT}/lib:${LIBRARY_PATH}"
	fi

	# CCDB
	set HAVE_CCDB="@HAVE_CCDB@"
	if [ "$HAVE_CCDB" = "1" ]; then
		export CCDB_HOME="@CCDB_HOME@"
		export PATH=${CCDB_HOME}/bin:${PATH}
		set LIBRARY_PATH="${CCDB_HOME}/lib:${LIBRARY_PATH}"
	fi

fi # JANAONLY

# Copy LIBRARY_PATH to the appropriate variable
set OS="@OS@"
if [ "$OS" = "Darwin" ]; then
	if [ -n "${DYLD_LIBRARY_PATH+x}" ]; then
		export DYLD_LIBRARY_PATH=${LIBRARY_PATH}:$DYLD_LIBRARY_PATH
	else
		export DYLD_LIBRARY_PATH=${LIBRARY_PATH}
	fi
else
	if [ -n "${LD_LIBRARY_PATH+x}" ]; then
		export LD_LIBRARY_PATH=${LIBRARY_PATH}:$LD_LIBRARY_PATH
	else
		export LD_LIBRARY_PATH=${LIBRARY_PATH}
	fi
fi

