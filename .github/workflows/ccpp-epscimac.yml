name: C/C++ CI epscimac

on:
  push:
    branches: [ master, cissie_ci ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    # matching the label to corresponding self-hosted runner
    runs-on: [self-hosted, macOS]
    # Run cmake, make, and make install as separate steps
    # Note that every step starts out in the $GITHUB_WORKSPACE
    # directory.
    steps:
      - uses: actions/checkout@v3
      - name: show path
        run: |
          echo `pwd`
          echo $GITHUB_WORKSPACE
          ls /opt/homebrew/cmake*
#      - name: cmake
#        run: |
#          mkdir -p $GITHUB_WORKSPACE/build
#          cd $GITHUB_WORKSPACE/build
#          ls -lla

# cmake ../ -DCMAKE_INSTALL_PREFIX=$GITHUB_WORKSPACE/Darwin -DUSE_ROOT=Off
#      - name: make
#        run: |
#          cd $GITHUB_WORKSPACE/build
#          make
#      - name: make install
#        run: |
#          cd $GITHUB_WORKSPACE/build
#          make install
#      - name: run JTest
#        run: |
#          export JANA_PLUGIN_PATH=$GITHUB_WORKSPACE/Darwin/plugins
#          echo "--- Running JTest plugin -----------------------"
#          $GITHUB_WORKSPACE/Darwin/bin/jana -PPLUGINS=JTest -Pjana:nevents=100
#      - name: run janatests
#        run: |
#          echo "--- Running janatests ------------------------------"
#          $GITHUB_WORKSPACE/Darwin/bin/janatests
